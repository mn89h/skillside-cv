%% start of file `skillside-cv-base.sty'.
%% Copyright 2024 Malte Nilges.
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License version 1.3c,
% available at http://www.latex-project.org/lppl/.
% This file is a modified version of the original package 'moderncvstyleclassic', made by Xavier Danaux 2012.
% This package changes section styles, header and info and adds definitions for sidebar and skillpoint creation


%-------------------------------------------------------------------------------
%                identification
%-------------------------------------------------------------------------------
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{skillside-cv-base}[2024/09/01 v1.0 skillside curriculum vitae base style]


%-------------------------------------------------------------------------------
%                required packages
%-------------------------------------------------------------------------------
% change the layout of the page on the fly, for resume or letter layout
\RequirePackage{changepage}


%-------------------------------------------------------------------------------
%                package options
%-------------------------------------------------------------------------------


%-------------------------------------------------------------------------------
%                overall style definition
%-------------------------------------------------------------------------------
% fonts
%\ifxetexorluatex
%  \setmainfont[Numbers={OldStyle,Proportional}, BoldFont={Kurier Bold}, ItalicFont={Kurier Light Italic}, BoldItalicFont={Kurier Bold Italic}]{Kurier Light}
%  \setsansfont[Numbers={OldStyle,Proportional}, BoldFont={Kurier Bold}, ItalicFont={Kurier Light Italic}, BoldItalicFont={Kurier Bold Italic}]{Kurier Light}
%  \setmathfont{Kurier Light}
%  \setmathfont[range=\mathit,\mathsfit]{Kurier Light Italic}
%  \setmathfont[range=\mathbfup,\mathbfsfup]{Kurier Bold}
%  \setmathfont[range=\mathbfit,\mathbfsfit]{Kurier Bold Italic}
%\else
  \IfFileExists{kurier.sty}%
    {\RequirePackage[light,math]{kurier}}%
    {}
%\fi
%   \IfFileExists{lmodern.sty}%
%     {\RequirePackage{lmodern}}%
%     {}
% %\fi

% symbols
\newcommand{\colorLinkedinSign}{\textcolor{rgb:red,6;green,108;blue,170}{\faLinkedin}}
\newcommand{\colorMailSign}{\textcolor{rgb:red,255;green,255;blue,255}{\faEnvelope[regular]}}
\renewcommand*{\addresssymbol}{\faAddressCard[regular]~}
\renewcommand*{\mobilesymbol}{\faMobile*~}
\renewcommand*{\phonesymbol}{\texttwemoji{phone}~}
\renewcommand*{\emailsymbol}{\faEnvelope[regular]~}
\renewcommand*{\carsymbol}{\faCar~}
% \renewcommand*{\emailsymbol}{\colorMailSign~}
\renewcommand*{\linkedinsymbol}{\faLinkedinIn~}
\renewcommand*{\gitsymbol}{\faGithub~}
% \renewcommand*{\mobilesymbol}{\marvosymbol{72}~}
% \renewcommand*{\phonesymbol}{\marvosymbol{84}~}
% \renewcommand*{\emailsymbol}{\marvosymbol{66}~}
% \renewcommand*{\linkedinsymbol}{{\Large\marvosymbol{205}}~}


%-------------------------------------------------------------------------------
%                resume style definition
%-------------------------------------------------------------------------------
% fonts
\renewcommand*{\namefont}{\fontsize{34}{36}\mdseries\upshape}
\renewcommand*{\titlefont}{\LARGE\mdseries\slshape}
\renewcommand*{\addressfont}{\small\mdseries}
\renewcommand*{\quotefont}{\large\itshape}
\renewcommand*{\sectionfont}{\Large\bfseries\upshape}
\renewcommand*{\subsectionfont}{\large\bfseries\itshape}
\renewcommand*{\hintfont}{\bfseries}

% styles
\renewcommand*{\namestyle}[1]{{\namefont\textcolor{color0}{#1}}}
\renewcommand*{\titlestyle}[1]{{\titlefont\textcolor{color2}{#1}}}
\renewcommand*{\addressstyle}[1]{{\addressfont\textcolor{color2}{#1}}}
\renewcommand*{\quotestyle}[1]{{\quotefont\textcolor{color1}{#1}}}
\renewcommand*{\sectionstyle}[1]{{\sectionfont\textcolor{color1}{#1}}}
\renewcommand*{\subsectionstyle}[1]{{\subsectionfont\textcolor{color1}{#1}}}
\renewcommand*{\hintstyle}[1]{{\hintfont\textcolor{color0}{#1}}}

% lengths
\newlength{\quotewidth}
\newlength{\hintscolumnwidth}
\setlength{\hintscolumnwidth}{0.3\textwidth}%
\newlength{\separatorcolumnwidth}
\setlength{\separatorcolumnwidth}{0.025\textwidth}%
\newlength{\maincolumnwidth}
\newlength{\doubleitemcolumnwidth}
\newlength{\listitemsymbolwidth}
\settowidth{\listitemsymbolwidth}{\listitemsymbol}
\newlength{\listitemmaincolumnwidth}
\newlength{\listdoubleitemmaincolumnwidth}

% commands
\setlength{\marginparwidth}{0\p@}%
\setlength{\marginparsep}{0\p@}
\renewcommand*{\recomputecvlengths}{%
  % regular lengths
  \changepage{}{+\marginparwidth+\marginparsep}{}{}{}{}{}{}{}% if a letter was typeset before the resume, \marginparwidth and \marginparsep will be non-zero; otherwise, this has no effect
  \setlength{\marginparwidth}{0\p@}%
  \setlength{\marginparsep}{0\p@}
  \setlength{\parskip}{0\p@}%
  % maketitle lengths
  \setlength{\quotewidth}{0.65\textwidth}%
  % main lenghts
  \setlength{\maincolumnwidth}{\textwidth-\hintscolumnwidth-\separatorcolumnwidth}%
  % listitem lengths
  \setlength{\listitemmaincolumnwidth}{\maincolumnwidth-\listitemsymbolwidth}%
  % doubleitem lengths
  \setlength{\doubleitemcolumnwidth}{\maincolumnwidth-\separatorcolumnwidth}%
  \setlength{\doubleitemcolumnwidth}{0.5\doubleitemcolumnwidth}%
  % listdoubleitem lengths
  \setlength{\listdoubleitemmaincolumnwidth}{\maincolumnwidth-\listitemsymbolwidth-\separatorcolumnwidth-\listitemsymbolwidth}%
  \setlength{\listdoubleitemmaincolumnwidth}{0.5\listdoubleitemmaincolumnwidth}%
  % fancyhdr lengths
  \renewcommand{\headwidth}{\textwidth}}
  
\renewenvironment{cvtworow}
    {\begin{paracol}{2}}
    {\end{paracol}}

\renewenvironment{skills}[1]
    {\begin{leftcolumn}
     \begin{minipage}[t]{\leftcolumnwidth}%
     {\color{color3}\fontsize{14pt}{16pt}\selectfont#1}
     \vspace{3pt}\color{color4}}
    {\vspace{14pt}
     \end{minipage}
     \end{leftcolumn}}

\newenvironment{nstabbing}
    {\setlength{\topsep}{0pt}%
    \setlength{\partopsep}{0pt}%
    \tabbing}
    {\endtabbing}

%SKILL DOTS
\renewcommand{\skilldots}[2]{
    \begin{nstabbing}
    \hspace*{1.2cm}\= \kill
    \begin{tikzpicture}
    \ifthenelse{#1 > 0}{
        \fill [color3, line width=1pt, draw=color3] (0pt, 0) circle (3pt);
    }{
        \draw [line width=1pt, draw=color3] (0pt, 0) circle (3pt);
    }
    \ifthenelse{#1 > 1}{
        \fill [color3, line width=1pt, draw=color3] (8pt, 0) circle (3pt);
    }{
        \draw [line width=1pt, draw=color3] (8pt, 0) circle (3pt);
    }
    \ifthenelse{#1 > 2}{
        \fill [color3, line width=1pt, draw=color3] (16pt, 0) circle (3pt);
    }{
        \draw [line width=1pt, draw=color3] (16pt, 0) circle (3pt);
    }
    \end{tikzpicture}\>#2
    \end{nstabbing}
}

\newlength{\leftcolumnwidth}
\setlength{\leftcolumnwidth}{\leftcolumnwidthmult\textwidth}
\newlength{\rightcolumnwidth}
\setlength{\rightcolumnwidth}{\textwidth}
\addtolength{\rightcolumnwidth}{-\leftcolumnwidth}
\addtolength{\leftcolumnwidth}{-.5\seperatorwidth}
\addtolength{\rightcolumnwidth}{-.5\seperatorwidth}
\setcolumnwidth{\leftcolumnwidth,\rightcolumnwidth}

\setlength\columnsep{\seperatorwidth}
  
% LEFT COLOR BAR
\newlength{\colorwidth}
\setlength{\colorwidth}{\leftcolumnwidth}
\addtolength{\colorwidth}{-\evensidemargin}
\addtolength{\colorwidth}{.5\columnsep}
% add * for this page only, add a background that fills have the page (from the top)
\AddToShipoutPictureBG{%
  \AtPageLowerLeft{%
    %\hspace*{.5\paperwidth}%
    \color{color1}%
    \rule{\colorwidth}{\paperheight}%
  }%
}%

\newlength{\circleradius}
\setlength{\circleradius}{1.8cm}
\newlength{\headerheight}
\setlength{\headerheight}{2\circleradius}
\addtolength{\headerheight}{-.1in}

% TITLE
\renewcommand{\makecvheader}{
    \begin{rightcolumn}
    
    \begin{minipage}[t][\headerheight][b]{\rightcolumnwidth}%
    \namestyle{\@firstname\ \@familyname}%
    \ifthenelse{\equal{\@title}{}}{}{\\[1.25em]\titlestyle{\@title}}%
    \end{minipage}%

    \end{rightcolumn}
}

% CVINFO
\newcommand{\cells}[2]{#1 & #2\\}
\renewcommand{\makecvinfo}{%
    \begin{leftcolumn}
    \ifthenelse{\isundefined{\@photo}}%
    {}%
    {
    % \frame{
        \noindent\begin{minipage}[t]{\leftcolumnwidth}
        \begin{center}
        \hspace{-.5\columnsep}
        \begin{tikzpicture}
        \clip (0,0) circle (1.8cm);
        % Include the image inside the clipped circle
        \node at (0,0) {\includegraphics[width=4.1cm]{\@photo}};
        \end{tikzpicture}
        \end{center}
        \end{minipage}
        \vspace{.25in}
    % }
    }
  
    \noindent\begin{minipage}[c][][t]{\leftcolumnwidth}% to set height=0.25\textheight
        \addressfont\color{color4}%
        % \newcolumntype{C}[1]{>{\centering}m{#1}}
        \begin{tabular}{>{\centering}m{0.9cm} l}
        % \begin{tabular}{>{\raggedright}m{0.9cm} l}
        % \begin{tabular}{>{\raggedleft}m{0.9cm} l}
        \ifthenelse{\isundefined{\@addressstreet}}{}{\cells{\addresssymbol}{\@addressstreet}%
          \ifthenelse{\equal{\@addresscity}{}}{}{\cells{}{\@addresscity}}}% if \addresstreet is defined, \addresscity will always be defined but could be empty
        \ifthenelse{\isundefined{\@mobile}}{}{\cells{\mobilesymbol}{\@mobile}}%
        \ifthenelse{\isundefined{\@phone}}{}{\cells{\phonesymbol}{\@phone}}%
        \ifthenelse{\isundefined{\@email}}{}{\cells{\emailsymbol}{\emaillink{\@email}}}%
        \ifthenelse{\isundefined{\@carlicense}}{}{\cells{\carsymbol}{\@carlicense}}%
        \ifthenelse{\isundefined{\@linkedin}}{}{%
            \ifthenelse{\equal{\@linkedintitle}{}}% \linkedintitle could be empty
            {\cells{\linkedinsymbol}{\httplink{\@linkedin}}}
            {\cells{\linkedinsymbol}{\httplink[\@linkedintitle]{\@linkedin}}}}% 
        \ifthenelse{\isundefined{\@git}}{}{%
            \ifthenelse{\equal{\@git}{}}% \linkedintitle could be empty
            {\cells{\gitsymbol}{\httplink{\@git}}}%
            {\cells{\gitsymbol}{\httplink[\@gittitle]{\@git}}}}% 
        \ifthenelse{\isundefined{\@extrainfo}}{}{\cells{}{\@extrainfo}}
        \end{tabular}
        \vspace{-\baselineskip}
    \end{minipage}
    \vspace{.25in}
        
    % \vspace{-\makecvinfoheight}%
    % \newlength{\leftcolumnwidth}%
    % \setlength{\leftcolumnwidth}{\hintscolumnwidth+3\seperatorwidth}%
    % \par\vspace{-\baselineskip}\vspace{-\parskip}\leftskip=\leftcolumnwidth
    \end{leftcolumn}
}

% \renewcommand*{\section}[1]{%
%   \par\addvspace{2.5ex}%
%   \phantomsection{}% reset the anchor for hyperrefs
%   \addcontentsline{toc}{section}{#1}%
%   \strut\sectionstyle{#1}%
%   \par\nobreak\addvspace{1ex}\@afterheading}% to avoid a pagebreak after the heading

% \renewcommand*{\subsection}[1]{%
%   \par\addvspace{1ex}%
%   \phantomsection{}% reset the anchor for hyperrefs
%   \addcontentsline{toc}{subsection}{#1}%
%   \strut\subsectionstyle{#1}%
%   \par\nobreak\addvspace{0.5ex}\@afterheading}% to avoid a pagebreak after the heading

% CONTENT
\newcommand{\content}[1]{
    \switchcolumn[1]
    \section{#1}
}

\renewcommand*{\section}[1]{%
    \switchcolumn[1]
  \par\addvspace{2.5ex}%
  \phantomsection{}% reset the anchor for hyperrefs
  \addcontentsline{toc}{section}{#1}%
  \strut\sectionstyle{#1}%
  \par\nobreak\addvspace{1ex}\@afterheading}% to avoid a pagebreak after the heading

\renewcommand*{\subsection}[1]{%
  \par\addvspace{1ex}%
  \phantomsection{}% reset the anchor for hyperrefs
  \addcontentsline{toc}{subsection}{#1}%
  \strut\subsectionstyle{#1}%
  \par\nobreak\addvspace{0.5ex}\@afterheading}% to avoid a pagebreak after the heading

  
\renewcommand*{\cvitem}[3][.25em]{%
  \ifthenelse{\equal{#2}{}}{}{\hintstyle{#2}\ifthenelse{\equal{#3}{}}{}{: }}{#3}%
  \par\addvspace{#1}}

\renewcommand*{\cvdoubleitem}[5][.25em]{%
  \begin{minipage}[t]{\doubleitemcolumnwidth}\hintstyle{#2}: #3\end{minipage}%
  \hfill% fill of \separatorcolumnwidth
  \begin{minipage}[t]{\doubleitemcolumnwidth}\ifthenelse{\equal{#4}{}}{}{\hintstyle{#4}: }#5\end{minipage}%
  \par\addvspace{#1}}

\renewcommand*{\cvlistitem}[2][.25em]{%
  \cvitem[#1]{}{\listitemsymbol\begin{minipage}[t]{\listitemmaincolumnwidth}#2\end{minipage}}}

\renewcommand*{\cvlistdoubleitem}[3][.25em]{%
  \cvitem[#1]{}{\listitemsymbol\begin{minipage}[t]{\listdoubleitemmaincolumnwidth}#2\end{minipage}%
  \hfill% fill of \separatorcolumnwidth
  \ifthenelse{\equal{#3}{}}%
    {}%
    {\listitemsymbol\begin{minipage}[t]{\listdoubleitemmaincolumnwidth}#3\end{minipage}}}}

% YEAR ENTRY
\newbox{\cventryyearbox}
\newlength{\cventrytitleboxwidth}
\renewcommand*{\cventry}[7][.25em]{%
  \savebox{\cventryyearbox}{%
    \hspace*{2\separatorcolumnwidth}%
    \hintstyle{#2}}%
  \setlength{\cventrytitleboxwidth}{\widthof{\usebox{\cventryyearbox}}}%
  \setlength{\cventrytitleboxwidth}{\rightcolumnwidth-\cventrytitleboxwidth}%
  \begin{minipage}{\rightcolumnwidth}%
    \parbox[t]{\cventrytitleboxwidth}{%
      % \strut%
      {\bfseries#3}%
      \ifthenelse{\equal{#4}{}}{}{, {\slshape#4}}%
      \ifthenelse{\equal{#5}{}}{}{, #5}%
      .\vspace{6pt}}%
    \usebox{\cventryyearbox}%
  \end{minipage}%
  \ifthenelse{\equal{#6}{} \AND \equal{#7}{}}{}{
      \begin{minipage}[t]{\rightcolumnwidth}%
        % \small%
        #6\\#7
      \end{minipage}}
  \par\addvspace{#1}}

\newbox{\cvitemwithcommentmainbox}
\newlength{\cvitemwithcommentmainlength}
\newlength{\cvitemwithcommentcommentlength}
\renewcommand*{\cvitemwithcomment}[4][.25em]{%
  \savebox{\cvitemwithcommentmainbox}{\ifthenelse{\equal{#2}{}}{}{\hintstyle{#2}: }#3}%
  \setlength{\cvitemwithcommentmainlength}{\widthof{\usebox{\cvitemwithcommentmainbox}}}%
  \setlength{\cvitemwithcommentcommentlength}{\maincolumnwidth-\separatorcolumnwidth-\cvitemwithcommentmainlength}%
  \begin{minipage}[t]{\cvitemwithcommentmainlength}\ifthenelse{\equal{#2}{}}{}{\hintstyle{#2}: }#3\end{minipage}%
  \hfill% fill of \separatorcolumnwidth
  \begin{minipage}[t]{\cvitemwithcommentcommentlength}\raggedleft\small\itshape#4\end{minipage}%
  \par\addvspace{#1}}

\renewenvironment{thebibliography}[1]%
  {%
    \bibliographyhead{\refname}%
%    \small%
    \begin{list}{\bibliographyitemlabel}%
      {%
        \setlength{\topsep}{0pt}%
        \setlength{\labelwidth}{\hintscolumnwidth}%
        \setlength{\labelsep}{\separatorcolumnwidth}%
        \leftmargin\labelwidth%
        \advance\leftmargin\labelsep%
        \@openbib@code%
        \usecounter{enumiv}%
        \let\p@enumiv\@empty%
        \renewcommand\theenumiv{\@arabic\c@enumiv}}%
        \sloppy\clubpenalty4000\widowpenalty4000%
%        \sfcode`\.\@m%
%        \sfcode `\=1000\relax%
  }%
  {%
    \def\@noitemerr{\@latex@warning{Empty `thebibliography' environment}}%
    \end{list}%
  }


\endinput


%% end of file `moderncvstyleoldstyle.sty'.